<![CDATA[
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>RM. Nusantara Babeh Justin - Depok</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap');

  /* Reset */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  html, body {
    height: 100%;
    width: 100%;
    background-color: #0a0a0a;
    color: #f3d7a1;
    font-family: 'Poppins', sans-serif;
  }

  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 600px;
    max-height: 600px;
    max-width: 100vw;
    overflow-y: auto;
    padding: 16px 20px;
  }

  header {
    width: 100%;
    text-align: center;
    border-bottom: 2px solid #d8b256;
    padding-bottom: 10px;
    margin-bottom: 20px;
  }
  header h1 {
    color: #d8b256;
    font-weight: 700;
    font-size: 2.6rem;
    letter-spacing: 2px;
    text-shadow: 0 0 8px #d8b256aa;
  }
  header p {
    font-weight: 300;
    font-style: italic;
    color: #c7b179cc;
    margin-top: 3px;
  }

  main {
    flex: 1;
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 28px;
    padding-bottom: 16px;
  }

  section {
    width: 100%;
    background-color: #1c1c1c;
    border-radius: 14px;
    padding: 18px 14px 16px;
    box-shadow: 0 0 15px #d8b256aa;
  }
  section h2 {
    font-size: 1.6rem;
    border-bottom: 2px solid #d8b256;
    color: #f3d7a1;
    font-weight: 600;
    padding-bottom: 8px;
    margin-bottom: 14px;
  }

  .menu-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 14px;
  }

  .card {
    background-color: #2a2a2a;
    border-radius: 12px;
    box-shadow: 0 6px 16px #b59144cc;
    max-width: 140px;
    width: 140px;
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: transform 0.2s ease;
  }
  .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 9px 28px #d8b256cc;
  }
  .card img {
    width: 100%;
    height: 110px;
    object-fit: cover;
    border-radius: 12px 12px 0 0;
    filter: brightness(0.91);
  }
  .card h3 {
    font-weight: 600;
    font-size: 1rem;
    margin-top: 8px;
    margin-bottom: 4px;
    color: #f7e2af;
    text-align: center;
    min-height: 3em;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .price {
    font-weight: 700;
    color: #d8b256;
    font-size: 0.95rem;
    margin-bottom: 8px;
  }
  button.order-btn {
    background-color: #d8b256;
    color: #0a0a0a;
    font-weight: 700;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    padding: 7px 0;
    width: 90%;
    margin-bottom: 7px;
    font-size: 0.95rem;
    transition: background-color 0.3s ease;
  }
  button.order-btn:hover, button.order-btn:focus {
    background-color: #f3d85a;
    outline: none;
  }

  /* BTN to open order summary */
  #viewOrderBtn {
    position: fixed;
    bottom: 12px;
    right: 20px;
    background-color: #d8b256;
    color: #0a0a0a;
    font-weight: 700;
    border: none;
    border-radius: 24px;
    padding: 12px 24px;
    cursor: pointer;
    font-size: 1rem;
    box-shadow: 0 9px 28px #d8b256cc;
    transition: background-color 0.3s ease;
    z-index: 1000;
  }
  #viewOrderBtn:hover,
  #viewOrderBtn:focus {
    background-color: #f3d85a;
    outline: none;
  }

  /* Modal base */
  .modal {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.85);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    padding: 15px;
  }
  .modal.active {
    display: flex;
  }
  .modal-content {
    background: #272727;
    border-radius: 14px;
    width: 320px;
    max-width: 90vw;
    max-height: 85vh;
    overflow-y: auto;
    padding: 24px 28px 20px;
    box-shadow: 0 0 18px #d8b256aa;
    color: #f3d7a1;
    display: flex;
    flex-direction: column;
    gap: 14px;
  }

  /* Order Item Detail Modal */
  #itemOrderModal .modal-content {
    text-align: center;
  }
  #itemOrderModal h3 {
    color: #d8b256;
    margin-bottom: 12px;
    font-weight: 700;
    letter-spacing: 1px;
  }
  #itemOrderModal img {
    width: 100%;
    height: 140px;
    object-fit: cover;
    border-radius: 12px;
    filter: brightness(0.91);
    margin-bottom: 12px;
  }
  #itemOrderModal .price {
    font-size: 1.15rem;
    margin-bottom: 16px;
  }
  #itemOrderModal label {
    display: block;
    font-weight: 600;
    margin-bottom: 8px;
    text-align: left;
  }
  #itemOrderModal input[type=number] {
    width: 70px;
    padding: 6px;
    border-radius: 6px;
    border: 1px solid #d8b256;
    font-size: 1rem;
    font-weight: 600;
    text-align: center;
    background-color: #1c1c1c;
    color: #f3d7a1;
  }
  #itemOrderModal button {
    margin-top: 14px;
  }

  /* Order Summary Modal */
  #orderSummaryModal h3 {
    color: #d8b256;
    margin-bottom: 10px;
    font-weight: 700;
    letter-spacing: 1px;
    text-align: center;
  }
  #orderSummaryModal ul {
    list-style: none;
    margin-bottom: 12px;
    max-height: 220px;
    overflow-y: auto;
  }
  #orderSummaryModal ul::-webkit-scrollbar {
    width: 8px;
  }
  #orderSummaryModal ul::-webkit-scrollbar-thumb {
    background-color: #d8b256bb;
    border-radius: 8px;
  }
  #orderSummaryModal li {
    display: flex;
    justify-content: space-between;
    margin-bottom: 8px;
    font-weight: 600;
    font-size: 1rem;
  }
  #orderSummaryModal li span.qty {
    color: #d8b256;
    margin-right: 8px;
  }
  #orderSummaryModal .total {
    font-weight: 700;
    font-size: 1.2rem;
    margin-bottom: 16px;
    text-align: right;
    border-top: 1px solid #d8b256aa;
    padding-top: 8px;
  }

  /* Payment Method */
  #paymentMethodFieldset {
    border: 1px solid #d8b256;
    border-radius: 10px;
    padding: 14px 16px;
    margin-bottom: 16px;
  }
  #paymentMethodFieldset legend {
    font-weight: 700;
    font-size: 1.1rem;
    color: #d8b256;
    margin-bottom: 8px;
  }
  #paymentMethodFieldset label {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 600;
    cursor: pointer;
  }
  #paymentMethodFieldset input {
    cursor: pointer;
  }
  #paymentMethodFieldset .qris-info {
    margin-top: 10px;
    text-align: center;
  }
  #paymentMethodFieldset .qris-info img {
    max-width: 150px;
    border-radius: 10px;
    box-shadow: 0 0 15px #d8b256aa;
  }

  /* Buttons in modal summary */
  #orderSummaryModal button {
    background-color: #d8b256;
    border: none;
    color: #0a0a0a;
    font-weight: 700;
    padding: 11px 26px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.3s ease;
    width: 100%;
  }
  #orderSummaryModal button:hover,
  #orderSummaryModal button:focus {
    background-color: #f3d85a;
    outline: none;
  }

  /* Footer */
  footer {
    width: 100%;
    text-align: center;
    margin-top: 12px;
    padding: 10px 0;
    border-top: 1px solid #3c3c3c;
    font-size: 0.85rem;
    color: #7a7a7a;
    user-select: none;
  }

  /* Responsive adjustments */
  @media (max-height: 600px) and (max-width: 600px) {
    body {
      padding: 12px 16px;
    }
    section {
      padding: 14px 12px 12px;
    }
    .card {
      max-width: 130px;
      width: 130px;
    }
    .card img {
      height: 90px;
    }
    /* Modal content smaller height */
    .modal-content {
      max-height: 80vh;
      padding: 20px 22px 18px;
    }
  }
</style>
</head>
<body>

<header>
  <h1>RM. Nusantara Babeh Justin</h1>
  <p>Masakan Nusantara</p>
   <p>Rasa Lezat Harga Merakyat</p>
</header>

<main aria-label="Menu RM Nusantara Babeh Justin">

  <section id="food-menu" aria-label="Menu Makanan">
    <h2>Menu Makanan</h2>
    <div class="menu-grid" id="foodItems"></div>
  </section>

  <section id="side-menu" aria-label="Menu Lalapan">
    <h2>Menu Lalapan</h2>
    <div class="menu-grid" id="sideItems"></div>
  </section>

  <section id="drink-menu" aria-label="Menu Minuman">
    <h2>Menu Minuman</h2>
    <div class="menu-grid" id="drinkItems"></div>
  </section>

</main>

<button id="viewOrderBtn" aria-label="Lihat pesanan Anda">Lihat Pesanan (0)</button>

<!-- Item Order Modal -->
<div id="itemOrderModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="itemOrderTitle" tabindex="-1">
  <div class="modal-content">
    <h3 id="itemOrderTitle"></h3>
    <img src="" alt="" id="itemOrderImg" />
    <div class="price" id="itemOrderPrice"></div>
    <label for="itemQuantityInput">Jumlah Pesanan:</label>
    <input type="number" id="itemQuantityInput" min="1" value="1" />
    <button class="order-btn" id="addToOrderBtn">Tambah ke Pesanan</button>
    <button class="order-btn" id="cancelItemOrderBtn" style="background-color: #7a7a7a; margin-top: 6px;">Batal</button>
  </div>
</div>

<!-- Order Summary Modal -->
<div id="orderSummaryModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="orderSummaryTitle" tabindex="-1">
  <div class="modal-content">
    <h3 id="orderSummaryTitle">Ringkasan Pesanan Anda</h3>
    <ul id="orderList"></ul>
    <div class="total" id="orderTotal">Total: Rp 0</div>

    <fieldset id="paymentMethodFieldset">
      <legend>Metode Pembayaran</legend>
      <label>
        <input type="radio" name="paymentMethod" value="QRIS" checked /> QRIS
      </label>
      <div class="qris-info" aria-live="polite" aria-atomic="true">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi1Pl2OgcZJp0v4sTtS7xvR9n7Tkx1v1i-2uSzMVO-z8zGaIgUDc_N_AoSXY6kvlaLboij5tObKS-_25uVCm8tFteWPFJIpEyBUaFAxjCyYJEQ48_0U_UOZLuQ-bsQw_HDCnsw9n6Lni5Ry/s1600/QR_code_for_mobile_English_Wikipedia.svg.png" alt="Kode QR QRIS" />
        <p>Scan QRIS untuk membayar via e-wallet</p>
      </div>
      <label>
        <input type="radio" name="paymentMethod" value="Cash" /> Tunai (Cash)
      </label>
    </fieldset>

    <button id="checkoutBtn">Checkout via WhatsApp</button>
    <button class="order-btn" id="closeSummaryBtn" style="background-color: #7a7a7a; margin-top: 8px;">Tutup</button>
  </div>
</div>

<footer>
  &copy; 2024 RM. Nusantara Babeh Justin. Semua hak cipta dilindungi.
</footer>

<script>
  (function() {
    const phoneNumber = "628577384809"; 

    // Menu makanan sama hargaa
    const foodMenu = [
      { name: "Nasi Putih", price: 8000, img: "https://upload.wikimedia.org/wikipedia/commons/8/8c/Nasi_putih_in_Indonesia.JPG" },
      { name: "Nasi Goreng", price: 18000, img: "https://upload.wikimedia.org/wikipedia/commons/8/8b/Nasi-Goreng.jpg" },
      { name: "Sate Ayam", price: 22000, img: "https://upload.wikimedia.org/wikipedia/commons/f/f9/Sate_ayam_madura.jpg" },
      { name: "Sop Kambing", price: 25000, img: "https://asset-2.tstatic.net/surabaya/foto/bank/images/sop-daging-kambing-tanpa-bau.jpg" },
      { name: "Soto Ayam", price: 18000, img: " https://upload.wikimedia.org/wikipedia/commons/6/69/Soto_Ayam_home-made.JPG" },
      { name: "Sayur Asem", price: 12000, img: "https://upload.wikimedia.org/wikipedia/commons/f/f1/Sayur_asem.JPG" },
      { name: "Ayam Serundeng", price: 22000, img: "https://foto.kontan.co.id/8z01mLvb6P8ACq3Bt66506Y0fxE=/smart/filters:format(webp)/2022/11/18/2033864696p.jpg" },
      { name: "Ayam Bakar", price: 22000, img: "https://asset-2.tstatic.net/tribunnews/foto/bank/images/ayam-taliwang_20180403_160740.jpg"},
      { name: "Ayam Penyet", price: 24000, img: "https://asset-2.tstatic.net/tribunnews/foto/bank/images/ayam-penyet_20151014_064943.jpg" },
      { name: "Telur Balado", price: 12000, img: "https://asset-2.tstatic.net/makassar/foto/bank/images/resep-mudah-masak-telur-balado.jpg" },
      { name: "Paru Goreng", price: 18000, img: "https://asset-2.tstatic.net/tribunnews/foto/bank/images/paru-serundengg.jpg" },
      { name: "Tahu Goreng", price: 10000, img: "https://asset-2.tstatic.net/palembang/foto/bank/images/tahu-goreng.jpg" },
      { name: "Tempe Goreng", price: 9000, img: "https://asset-2.tstatic.net/priangan/foto/bank/images/Ilustrasi-tempe-goreng.jpg" }
    ];

    const sideMenu = [
      { name: "Kol Goreng", price: 5000, img: "https://asset-2.tstatic.net/medan/foto/bank/images/kol_goreng_.jpg" },
      { name: "Timun", price: 4000, img: "https://asset-2.tstatic.net/tribunnews/foto/bank/images/wah-ternyata-mentimun-bisa-hindarkan-kita-dari-bau-mulut-ketika-berpuasa_20180518_114605.jpg" },
      { name: "Kemangi", price: 2000, img: "https://asset-2.tstatic.net/aceh/foto/bank/images/Daun-Kemangi-Bisa-Bikin-Pria-dan-Wanita-Bergairah.jpg" },
      { name: "Terong Balado", price: 6000, img: "https://asset-2.tstatic.net/bali/foto/bank/images/Resep-Terong-Balado-Bikin-Nafsu-Makan-Meningkat-Pesat.jpg" },
      { name: "Sambal Hijau", price: 7000, img: "https://asset-2.tstatic.net/jambi/foto/bank/images/Resep-Sambal-Ijo-Padangg.jpg" },
      { name: "Sambal Merah", price: 7000, img: "https://asset-2.tstatic.net/makassar/foto/bank/images/sambal-terasi.jpg" }
    ];

    const drinkMenu = [
      { name: "Es Jeruk ", price: 7000, img: "https://asset-2.tstatic.net/tribunnews/foto/bank/images/resep-es-jeruk-leci.jpg" },
      { name: "Es Teh ", price: 6000, img: "https://asset-2.tstatic.net/makassar/foto/bank/images/ilustrasi-es-teh-manis.jpg" },
      { name: "Es Soda Gembira", price: 12000, img: "https://asset-2.tstatic.net/travel/foto/bank/images/es-soda-gembira.jpg" },
      { name: "Es Campur", price: 15000, img: "https://asset-2.tstatic.net/tribunnews/foto/bank/images/es-campur-buah-new.jpg" },
      { name: "Es Cendol", price: 12000, img: "https://asset-2.tstatic.net/tribunnews/foto/bank/images/cendoldawets.jpg" }
    ];

    // Containers
    const foodContainer = document.getElementById('foodItems');
    const sideContainer = document.getElementById('sideItems');
    const drinkContainer = document.getElementById('drinkItems');
    const viewOrderBtn = document.getElementById('viewOrderBtn');

    // Modals and controls
    const itemOrderModal = document.getElementById('itemOrderModal');
    const itemOrderTitle = document.getElementById('itemOrderTitle');
    const itemOrderImg = document.getElementById('itemOrderImg');
    const itemOrderPrice = document.getElementById('itemOrderPrice');
    const itemQuantityInput = document.getElementById('itemQuantityInput');
    const addToOrderBtn = document.getElementById('addToOrderBtn');
    const cancelItemOrderBtn = document.getElementById('cancelItemOrderBtn');

    const orderSummaryModal = document.getElementById('orderSummaryModal');
    const orderList = document.getElementById('orderList');
    const orderTotal = document.getElementById('orderTotal');
    const closeSummaryBtn = document.getElementById('closeSummaryBtn');
    const checkoutBtn = document.getElementById('checkoutBtn');
    const paymentMethodFieldset = document.getElementById('paymentMethodFieldset');

    // State
    let cart = [];
    let currentItem = null;

    // Utils
    function formatRupiah(number) {
      return 'Rp ' + number.toLocaleString('id-ID');
    }

    function updateViewOrderBtn() {
      const totalQty = cart.reduce((sum, item) => sum + item.quantity, 0);
      viewOrderBtn.textContent = `Lihat Pesanan (${totalQty})`;
    }

    function openItemOrderModal(item) {
      currentItem = item;
      itemOrderTitle.textContent = item.name;
      itemOrderImg.src = item.img;
      itemOrderImg.alt = `Foto ${item.name}`;
      itemOrderPrice.textContent = formatRupiah(item.price);
      itemQuantityInput.value = 1;
      itemQuantityInput.min = 1;
      itemQuantityInput.max = 999;
      itemOrderModal.classList.add('active');
      itemQuantityInput.focus();
    }

    function closeItemOrderModal() {
      currentItem = null;
      itemOrderModal.classList.remove('active');
    }

    function openOrderSummaryModal() {
      renderOrderList();
      orderSummaryModal.classList.add('active');
      closeSummaryBtn.focus();
    }

    function closeOrderSummaryModal() {
      orderSummaryModal.classList.remove('active');
    }

    function addItemToCart(item, quantity) {
      const existingIndex = cart.findIndex(ci => ci.name === item.name);
      if (existingIndex !== -1) {
        cart[existingIndex].quantity += quantity;
      } else {
        cart.push({
          name: item.name,
          price: item.price,
          quantity: quantity
        });
      }
      updateViewOrderBtn();
    }

    function renderOrderList() {
      orderList.innerHTML = '';
      if (cart.length === 0) {
        orderList.innerHTML = '<li>Belum ada pesanan</li>';
        orderTotal.textContent = 'Total: Rp 0';
        checkoutBtn.disabled = true;
        return;
      }
      checkoutBtn.disabled = false;
      let total = 0;
      cart.forEach(item => {
        const li = document.createElement('li');
        const qtySpan = document.createElement('span');
        qtySpan.className = 'qty';
        qtySpan.textContent = `${item.quantity} x`;
        li.appendChild(qtySpan);
        li.appendChild(document.createTextNode(`${item.name}`));
        const priceSpan = document.createElement('span');
        priceSpan.textContent = formatRupiah(item.price * item.quantity);
        li.appendChild(priceSpan);
        orderList.appendChild(li);
        total += item.price * item.quantity;
      });
      orderTotal.textContent = `Total: ${formatRupiah(total)}`;
    }

    function generateOrderNumber() {
      return 'BJD' + Math.floor(Math.random() * 900000 + 100000);
    }

    function checkoutOrder() {
      if (cart.length === 0) {
        alert('Pesanan Anda kosong!');
        return;
      }
      const orderNum = generateOrderNumber();
      const paymentMethod = paymentMethodFieldset.querySelector('input[name="paymentMethod"]:checked').value;

      let message = `Halo RM. Nusantara Babeh Justin! Saya ingin memesan:\n\n`;
      cart.forEach(item => {
        message += `- ${item.name} x${item.quantity} = ${formatRupiah(item.price * item.quantity)}\n`;
      });
      const totalPrice = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
      message += `\nTotal: ${formatRupiah(totalPrice)}\n`;
      message += `Metode Pembayaran: ${paymentMethod}\n`;
      message += `Nomor Pemesanan: ${orderNum}\n\nTerima kasih!`;

      const encodedMessage = encodeURIComponent(message);
      const url = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
      window.open(url, '_blank');

      // Clear cart and update UI
      cart = [];
      updateViewOrderBtn();
      closeOrderSummaryModal();
      closeItemOrderModal();
      alert(`Nomor Pesanan Anda: ${orderNum}\nAnda akan diarahkan ke WhatsApp untuk konfirmasi pesanan.`);
    }

    // Render menu cards
    function createCard(item) {
      const card = document.createElement('article');
      card.className = 'card';

      const img = document.createElement('img');
      img.src = item.img;
      img.alt = item.name;
      card.appendChild(img);

      const title = document.createElement('h3');
      title.textContent = item.name;
      card.appendChild(title);

      const price = document.createElement('div');
      price.className = 'price';
      price.textContent = formatRupiah(item.price);
      card.appendChild(price);

      const btn = document.createElement('button');
      btn.className = 'order-btn';
      btn.textContent = 'Pesan';
      btn.setAttribute('aria-label', `Pesan ${item.name} dengan harga ${formatRupiah(item.price)}`);
      btn.addEventListener('click', () => openItemOrderModal(item));
      card.appendChild(btn);

      return card;
    }

    // Populate all menus
    foodMenu.forEach(item => foodContainer.appendChild(createCard(item)));
    sideMenu.forEach(item => sideContainer.appendChild(createCard(item)));
    drinkMenu.forEach(item => drinkContainer.appendChild(createCard(item)));

    // Event listeners
    addToOrderBtn.addEventListener('click', () => {
      const qty = parseInt(itemQuantityInput.value);
      if (isNaN(qty) || qty < 1) {
        alert('Masukkan jumlah yang valid.');
        itemQuantityInput.focus();
        return;
      }
      addItemToCart(currentItem, qty);
      closeItemOrderModal();
    });
    cancelItemOrderBtn.addEventListener('click', closeItemOrderModal);

    viewOrderBtn.addEventListener('click', openOrderSummaryModal);
    closeSummaryBtn.addEventListener('click', closeOrderSummaryModal);

    checkoutBtn.addEventListener('click', checkoutOrder);

    // Modal backdrop click closes modal
    itemOrderModal.addEventListener('click', e => {
      if (e.target === itemOrderModal) closeItemOrderModal();
    });
    orderSummaryModal.addEventListener('click', e => {
      if (e.target === orderSummaryModal) closeOrderSummaryModal();
    });

    // Keyboard support to close modal on ESC
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        if (itemOrderModal.classList.contains('active')) {
          closeItemOrderModal();
        }
        if (orderSummaryModal.classList.contains('active')) {
          closeOrderSummaryModal();
        }
      }
    });

    // Init
    updateViewOrderBtn();
  })();
</script>

</body>
</html>
]]>
